name: "Perform Static Analysis"
description: "Perform Static Analysis"
inputs:
  sonar_token:
    description: "Sonar token API key"
    required: false
runs:
  using: "composite"
  steps:
    - name: "Check prerequisites for performing static analysis"
      shell: bash
      id: check
      run: echo "secret_exist=${{ inputs.sonar_token != '' }}" >> $GITHUB_OUTPUT
    - name: "Checkout code"
      if: steps.check.outputs.secret_exist == 'true'
      uses: actions/checkout@v3
    - name: "Perform Static Analysis"
      shell: bash
      if: steps.check.outputs.secret_exist == 'true'
      run: |
        export SONAR_TOKEN=${{ inputs.sonar_token }}
        ./scripts/reports/perform-static-analysis.sh
